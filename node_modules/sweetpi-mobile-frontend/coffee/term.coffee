$(document).on "pageinit", '#index', (event) ->
  socket = io.connect()
  socket.on "connect", ->
    socket.emit 'term', {}

    term = new Terminal(
      cols: 80
      rows: 24
      useStyle: true,
      screenKeys: true
    )
    term.on "data", (data) ->
      socket.emit "data", data

    term.on "title", (title) ->
      document.title = title

    term.open $('#term')[0]
    term.write "\u001b[31mWelcome to term.js!\u001b[m\r\n"
    socket.on "data", (data) ->
      term.write data

    socket.on "disconnect", ->
      term.destroy()